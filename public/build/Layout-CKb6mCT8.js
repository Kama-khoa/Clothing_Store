import{c as w}from"./createLucideIcon-Cvfh0g26.js";import{j as e,r,a as N,U as t,V as M}from"./app-DlvoDJJo.js";import{D as U}from"./Dropdown-DhdSRdl1.js";import{D as P,m as _,a as $,b as q,c as F,A as D,d as O,X as z}from"./alert-B7bscsUx.js";import{B as S}from"./button-g7U9L8Cx.js";import{S as A,H as T,U as E,M as H}from"./user-CmaB7S3S.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=w("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=w("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=w("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=w("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),W=({item:s,onUpdateQuantity:h,onRemove:m})=>{console.log("CartItem data:",s);const y=j=>{const x=parseInt(j.target.value);if(!s.cart_item_id){console.error("Missing cart_item_id:",s);return}x>0&&x<=s.variant.stock_quantity&&h(s.cart_item_id,x)};return e.jsxs("div",{className:"flex items-center gap-4 p-4 border-b",children:[e.jsx("div",{className:"w-20 h-20 flex-shrink-0"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-medium",children:s.variant.product.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.variant.color.name," - ",s.variant.size.name]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("select",{value:s.quantity,onChange:y,className:"w-20 rounded border-gray-300 focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[...Array(s.variant.stock_quantity)].map((j,x)=>e.jsx("option",{value:x+1,children:x+1},x+1))}),e.jsxs("span",{className:"text-sm font-medium",children:["$",(s.variant.price*s.quantity).toFixed(2)]})]})]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:()=>m(s.cart_item_id),className:"text-gray-500 hover:text-red-500",children:e.jsx(R,{className:"h-5 w-5"})})]})},L=r.createContext(),X=({children:s})=>{const[h,m]=r.useState(null),[y,j]=r.useState(!0),x=r.useCallback(async()=>{var l;try{const c=await N.get("/cart");console.log("Cart response:",(l=c.data.data)==null?void 0:l.items),m(c.data.data)}catch(c){console.error("Error fetching cart:",c)}finally{j(!1)}},[]),n=r.useCallback(async()=>{try{const l=await N.get("/cart");m(l.data.data)}catch(l){console.error("Error updating cart:",l)}},[]),u=r.useCallback(async(l,c)=>{try{await N.put(`/cart/${l}`,{quantity:c}),await n()}catch(p){throw console.error("Error updating quantity:",p),p}},[n]),v=r.useCallback(async l=>{try{await N.delete(`/cart/${l}`),await n()}catch(c){throw console.error("Error removing item:",c),c}},[n]),g=r.useCallback(async()=>{try{await N.delete("/cart/"),await n()}catch(l){throw console.error("Error clearing cart:",l),l}},[n]),C=r.useCallback(async(l,c=1)=>{var p,f;try{const o=await N.post("/cart/add",{variant_id:l,quantity:c});return await n(),{success:!0,message:"Item added to cart successfully"}}catch(o){return console.error("Error adding to cart:",o),{success:!1,message:((f=(p=o.response)==null?void 0:p.data)==null?void 0:f.message)||"Failed to add item to cart"}}},[n]),k={cart:h,isLoading:y,fetchCart:x,updateCart:n,updateQuantity:u,removeItem:v,clearCart:g,addToCart:C};return e.jsx(L.Provider,{value:k,children:s})},G=()=>{const s=r.useContext(L);if(!s)throw new Error("useCart must be used within a CartProvider");return s},J=()=>{var f,o;const{cart:s,isLoading:h,fetchCart:m,updateQuantity:y,removeItem:j,clearCart:x}=G(),[n,u]=r.useState(null),[v,g]=r.useState(!1);r.useEffect(()=>{m()},[m]);const C=()=>{var d;return(d=s==null?void 0:s.items)!=null&&d.length?s.items.reduce((a,i)=>a+i.variant.price*i.quantity,0):0},k=((f=s==null?void 0:s.items)==null?void 0:f.reduce((d,a)=>d+a.quantity,0))||0,l=async(d,a)=>{var i,b;try{g(!0),u(null),await y(d,a)}catch(I){u(((b=(i=I.response)==null?void 0:i.data)==null?void 0:b.message)||"Failed to update quantity. Please try again."),console.error("Update quantity error:",I)}finally{g(!1)}},c=async d=>{try{g(!0),u(null),await j(d)}catch{u("Failed to remove item. Please try again.")}finally{g(!1)}},p=async()=>{try{g(!0),u(null),await x()}catch{u("Failed to clear cart. Please try again.")}finally{g(!1)}};return e.jsxs(P,{children:[e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"p-2 relative cursor-pointer inline-flex items-center border-b-2 border-transparent",children:[e.jsx(A,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:k})]})}),e.jsxs($,{className:"sm:max-w-[425px]",children:[e.jsx(q,{children:e.jsx(F,{children:"Shopping Cart"})}),n&&e.jsx(D,{variant:"destructive",children:e.jsx(O,{children:n})}),h||v?e.jsx("div",{className:"p-4 text-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"})}):(o=s==null?void 0:s.items)!=null&&o.length?e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-grow max-h-[60vh] overflow-y-auto",children:s.items.map(d=>e.jsx(W,{item:d,onUpdateQuantity:l,onRemove:c},d.cart_item_id))}),e.jsxs("div",{className:"p-4 border-t mt-auto",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("span",{className:"font-medium",children:"Total:"}),e.jsxs("span",{className:"font-medium",children:["$",C().toFixed(2)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{variant:"outline",className:"flex-1",onClick:p,disabled:v,children:"Clear Cart"}),e.jsx(S,{className:"flex-1",asChild:!0,disabled:v,children:e.jsx(t,{href:"/checkout",children:"Checkout"})})]})]})]}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"mb-4",children:"Your cart is empty"}),e.jsx(S,{asChild:!0,children:e.jsx(t,{href:"/products",children:"Continue Shopping"})})]})]})]})},K=()=>{const{url:s}=M(),{auth:h}=M().props,[m,y]=r.useState(!1),[j,x]=r.useState(!1),[n,u]=r.useState(!1),[v,g]=r.useState([]),[C,k]=r.useState(!0),[l,c]=r.useState(!1),p=a=>a==="/"?s==="/":s.startsWith(a),f=a=>{const i="inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium";return p(a)?`${i} border-blue-500 text-gray-900`:`${i} border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700`},o=a=>{const i="block w-full pl-3 pr-4 py-2 border-l-4 text-base font-medium";return p(a)?`${i} bg-blue-50 border-blue-500 text-blue-700`:`${i} border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700`};r.useEffect(()=>{(async()=>{try{const b=await N.get("/api/v1/categories/featured");g(b.data)}catch(b){console.error("Error fetching categories:",b)}finally{k(!1)}})();const i=()=>{c(window.scrollY>0)};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const d=[...(v||[]).map(({slug:a,name:i,products_count:b})=>({href:`/products?category=${a}`,label:i,count:b})),{href:"/products",label:"View All Categories"}];return r.useEffect(()=>{y(!1)},[s]),e.jsxs("nav",{className:`bg-white transition-all duration-300 ${l?"fixed top-0 left-0 right-0 shadow-md z-50":""}`,children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0 flex items-center",children:e.jsx(t,{href:"/",className:"text-2xl font-bold text-blue-600",children:"Shop Logo"})}),e.jsxs("div",{className:"hidden sm:ml-6 sm:flex sm:space-x-8",children:[e.jsx(t,{href:"/",className:f("/"),children:"Home"}),e.jsx(t,{href:"/products",className:f("/products"),children:"Products"}),C?e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.jsx(U,{trigger:"Categories",items:d}),e.jsx(t,{href:"/about",className:f("/about"),children:"About"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs(t,{href:"/wishlist",className:`p-2 relative ${f("/wishlist")}`,children:[e.jsx(T,{className:"h-6 w-6"}),e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"0"})]}),e.jsx("div",{className:"p-2",children:e.jsx(J,{})}),e.jsx("div",{className:"hidden sm:flex sm:items-center sm:ml-6",children:h.user?e.jsxs("div",{className:"relative ml-3",children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>x(!j),className:"flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 focus:outline-none",children:[e.jsx("span",{className:"mr-2",children:h.user.name}),e.jsx(E,{className:"h-5 w-5"})]})}),j&&e.jsxs("div",{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5",children:[e.jsx(t,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Profile"}),e.jsx(t,{href:"/orders",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Orders"}),e.jsx(t,{href:"/logout",method:"post",as:"button",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Log Out"})]})]}):e.jsxs("div",{className:"space-x-4",children:[e.jsx(t,{href:"/login",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign in"}),e.jsx(t,{href:"/register",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Sign up"})]})}),e.jsx("div",{className:"flex items-center sm:hidden ml-4",children:e.jsx("button",{onClick:()=>y(!m),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500",children:m?e.jsx(z,{className:"block h-6 w-6"}):e.jsx(H,{className:"block h-6 w-6"})})})]})]})}),m&&e.jsxs("div",{className:"sm:hidden bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[e.jsx(t,{href:"/",className:o("/"),children:"Home"}),e.jsx(t,{href:"/products",className:o("/products"),children:"Products"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>u(!n),className:`flex justify-between items-center w-full ${o("/categories")}`,children:[e.jsx("span",{children:"Categories"}),e.jsx("svg",{className:`w-5 h-5 transition-transform ${n?"transform rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),n&&e.jsxs("div",{className:"pl-4",children:[v.map(a=>e.jsx(t,{href:`/products?category=${a.slug}`,className:"block py-2 pl-3 text-gray-500 hover:text-gray-700",children:a.name},a.slug)),e.jsx(t,{href:"/products",className:"block py-2 pl-3 text-gray-500 hover:text-gray-700",children:"View All Categories"})]})]}),e.jsx(t,{href:"/about",className:o("/about"),children:"About"})]}),e.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:h.user?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center px-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E,{className:"h-8 w-8 rounded-full text-gray-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-base font-medium text-gray-800",children:h.user.name}),e.jsx("div",{className:"text-sm font-medium text-gray-500",children:h.user.email})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(t,{href:"/profile",className:o("/profile"),children:"Your Profile"}),e.jsx(t,{href:"/orders",className:o("/orders"),children:"Your Orders"}),e.jsx(t,{href:"/logout",method:"post",as:"button",className:o("/logout"),children:"Log Out"})]})]}):e.jsxs("div",{className:"mt-3 space-y-1 px-2",children:[e.jsx(t,{href:"/login",className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Sign in"}),e.jsx(t,{href:"/register",className:"flex justify-center w-full px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-600 rounded-md hover:bg-gray-50",children:"Sign up"})]})})]})]})},Z=()=>e.jsx("footer",{className:"bg-gray-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"About Us"}),e.jsx("p",{className:"text-gray-400",children:"We are dedicated to providing the best shopping experience for our customers with quality products and excellent service."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(t,{href:"/products",className:"text-gray-400 hover:text-white transition",children:"Products"})}),e.jsx("li",{children:e.jsx(t,{href:"/categories",className:"text-gray-400 hover:text-white transition",children:"Categories"})}),e.jsx("li",{children:e.jsx(t,{href:"/about",className:"text-gray-400 hover:text-white transition",children:"About Us"})}),e.jsx("li",{children:e.jsx(t,{href:"/contact",className:"text-gray-400 hover:text-white transition",children:"Contact"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Customer Service"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(t,{href:"/shipping",className:"text-gray-400 hover:text-white transition",children:"Shipping Information"})}),e.jsx("li",{children:e.jsx(t,{href:"/returns",className:"text-gray-400 hover:text-white transition",children:"Returns Policy"})}),e.jsx("li",{children:e.jsx(t,{href:"/faq",className:"text-gray-400 hover:text-white transition",children:"FAQ"})}),e.jsx("li",{children:e.jsx(t,{href:"/privacy",className:"text-gray-400 hover:text-white transition",children:"Privacy Policy"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Connect With Us"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:e.jsx(Q,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:e.jsx(B,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:e.jsx(Y,{className:"h-6 w-6"})}),e.jsx("a",{href:"#",className:"text-gray-400 hover:text-white transition",children:e.jsx(V,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"text-gray-400",children:[e.jsx("p",{children:"Email: contact@example.com"}),e.jsx("p",{children:"Phone: (123) 456-7890"})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-800",children:e.jsxs("p",{className:"text-center text-gray-400",children:["© ",new Date().getFullYear()," Your Shop Name. All rights reserved."]})})]})}),ie=({children:s})=>{const{auth:h}=M().props;return e.jsx(X,{children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(K,{user:h.user}),e.jsx("main",{className:"flex-grow",children:s}),e.jsx(Z,{})]})})};export{ne as A,ie as L,G as u};
