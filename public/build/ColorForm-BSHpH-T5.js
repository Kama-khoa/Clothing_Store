import{r as i,j as e,a as g}from"./app-DlvoDJJo.js";import{D as E,a as N,b as w,c as y,A as S,d as A}from"./alert-B7bscsUx.js";import{B as v}from"./button-g7U9L8Cx.js";import{I as F}from"./input-pDD4vCSl.js";import{L as b}from"./label-C_gtDDxQ.js";import{T}from"./textarea-Ct-gyCQG.js";import"./index-DV74KP8K.js";import"./createLucideIcon-Cvfh0g26.js";function P({color:s,onClose:c,onSuccess:C}){const[a,l]=i.useState({name:"",description:""}),[d,m]=i.useState(!1),[n,p]=i.useState({}),[x,u]=i.useState("");i.useEffect(()=>{s&&l({name:s.name||"",description:s.description||""})},[s]);const D=async t=>{var h,f;t.preventDefault(),m(!0),p({}),u("");try{const r={...a,description:`${a.description||""}
Color Code: ${a.color||""}`.trim()};if(s){const j={};Object.keys(r).forEach(o=>{r[o]!==s[o]&&(j[o]=r[o])}),await g.post(`/api/v1/colors/${s.id}`,j)}else await g.post("/api/v1/colors",r);C()}catch(r){(f=(h=r.response)==null?void 0:h.data)!=null&&f.errors?p(r.response.data.errors):u("An error occurred while saving the color. Please try again."),console.error("Error submitting color:",r)}finally{m(!1)}};return e.jsx(E,{open:!0,onOpenChange:c,children:e.jsxs(N,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(w,{children:e.jsx(y,{children:s?"Edit Color":"Add New Color"})}),x&&e.jsx(S,{variant:"destructive",children:e.jsx(A,{children:x})}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"name",children:"Name"}),e.jsx(F,{id:"name",value:a.name,onChange:t=>l({...a,name:t.target.value}),required:!0}),n.name&&e.jsx("span",{className:"text-red-500 text-sm",children:n.name})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"description",children:"Description"}),e.jsx(T,{id:"description",value:a.description,onChange:t=>l({...a,description:t.target.value}),rows:4}),n.description&&e.jsx("span",{className:"text-red-500 text-sm",children:n.description})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(v,{type:"button",variant:"outline",onClick:c,disabled:d,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:d,className:"min-w-[100px]",children:d?"Saving...":s?"Update":"Create"})]})]})]})})}export{P as default};
