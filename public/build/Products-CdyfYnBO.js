import{r as a,j as e,a as n}from"./app-DlvoDJJo.js";import{L as b,A as $}from"./Layout-CKb6mCT8.js";import{P as k}from"./ProductGrid-eOqC6xB1.js";import"./createLucideIcon-Cvfh0g26.js";import"./Dropdown-DhdSRdl1.js";import"./chevron-down-Se41l7_H.js";import"./alert-B7bscsUx.js";import"./button-g7U9L8Cx.js";import"./index-DV74KP8K.js";import"./user-CmaB7S3S.js";import"./chevron-left-DiZTRhl0.js";import"./chevron-right-DuWMSwET.js";const Y=()=>{var w;const[o,j]=a.useState([]),[v,N]=a.useState([]),[c,d]=a.useState([]),[y,m]=a.useState(!0),[l,h]=a.useState({category:"",sort:"newest",page:1}),[S,P]=a.useState(!1),p=s=>{const t=new URLSearchParams(window.location.search);Object.entries(s).forEach(([r,i])=>{i?t.set(r,i):t.delete(r)}),window.history.pushState({},"",`${window.location.pathname}${t.toString()?`?${t.toString()}`:""}`)},u=async s=>{try{m(!0);const t=new URLSearchParams;Object.entries(s).forEach(([R,f])=>{f&&t.append(R,f)});const[r,i,E]=await Promise.all([n.get(`/api/v1/products?${t.toString()}`),n.get("/api/v1/categories/featured"),n.get("/api/v1/wishlist")]);j(r.data),N(i.data||[]),d(E.data||[])}catch(t){console.error("Error fetching data:",t)}finally{m(!1)}};a.useEffect(()=>{const s=new URLSearchParams(window.location.search),t={category:s.get("category")||"",sort:s.get("sort")||"newest",page:parseInt(s.get("page"))||1};h(t),u(t);const r=()=>{P(window.scrollY>300)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[]);const g=(s,t)=>{const r={...l,[s]:t,page:1};s==="category"&&(r.sort="newest"),h(r),p(r),u(r)},C=async s=>{try{(await n.post(`/api/v1/wishlist/toggle/${s}`)).data.added?d([...c,s]):d(c.filter(r=>r!==s))}catch(t){console.error("Error toggling wishlist:",t)}},x=()=>{window.scrollTo({top:0,behavior:"smooth"})},L=s=>{const t={...l,page:s};h(t),p(t),u(t),x()};return y?e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-neutral-300 border-t-neutral-900 animate-spin"})})}):e.jsx(b,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("section",{className:"py-20",children:[e.jsxs("div",{className:"mb-12 text-center",children:[e.jsx("span",{className:"text-sm uppercase tracking-wider text-neutral-500",children:"Collection"}),e.jsx("h2",{className:"text-3xl font-light mt-2",children:"Our Products"}),e.jsx("p",{className:"mt-2 text-neutral-500",children:"Discover our wide range of products"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsxs("div",{className:"bg-white border border-neutral-200 rounded-lg p-6 space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sort By"}),e.jsxs("select",{value:l.sort,onChange:s=>g("sort",s.target.value),className:"w-full border-neutral-200 rounded-lg focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"newest",children:"Newest"}),e.jsx("option",{value:"price_asc",children:"Price: Low to High"}),e.jsx("option",{value:"price_desc",children:"Price: High to Low"}),e.jsx("option",{value:"name_asc",children:"Name: A to Z"}),e.jsx("option",{value:"name_desc",children:"Name: Z to A"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Categories"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>g("category",""),className:`block w-full text-left px-3 py-2 rounded-lg transition-colors ${l.category?"hover:bg-neutral-50":"bg-blue-50 text-blue-700"}`,children:"All Categories"}),v.map(s=>e.jsx("button",{onClick:()=>g("category",s.slug),className:`block w-full text-left px-3 py-2 rounded-lg transition-colors ${l.category===s.slug?"bg-blue-50 text-blue-700":"hover:bg-neutral-50"}`,children:s.name},s.id))]})]})]})}),e.jsx("div",{className:"flex-1",children:((w=o.data)==null?void 0:w.length)===0?e.jsxs("div",{className:"text-center py-12 bg-white border border-neutral-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No products found"}),e.jsx("p",{className:"mt-2 text-neutral-500",children:"Try adjusting your search or filter criteria"})]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{products:o.data||[],onToggleWishlist:C,wishlist:c}),o.meta&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsx("div",{className:"flex space-x-2",children:[...Array(o.meta.last_page)].map((s,t)=>e.jsx("button",{onClick:()=>L(t+1),className:`px-4 py-2 rounded-lg ${o.meta.current_page===t+1?"bg-blue-600 text-white":"bg-white border border-neutral-200 hover:bg-neutral-50"}`,children:t+1},t))})})]})})]})]})}),S&&e.jsx("button",{onClick:x,className:"fixed bottom-8 right-8 p-3 bg-white/80 backdrop-blur-sm border border-neutral-200 rounded-full shadow-lg transition-all duration-300 hover:bg-white",children:e.jsx($,{className:"w-5 h-5"})})]})})};export{Y as default};
