import{r as t,j as e,M as S,a as M}from"./app-DlvoDJJo.js";import{A as T}from"./AdminLayout-LRVHqC77.js";import{B as n}from"./button-g7U9L8Cx.js";import{I as A}from"./input-pDD4vCSl.js";import{B,T as D,a as E,b as l,c as g,d as C,e as i,A as I}from"./Breadcrumb-CPWcmSEU.js";import"./user-CmaB7S3S.js";import"./createLucideIcon-Cvfh0g26.js";import"./chevron-left-DiZTRhl0.js";import"./users-DTMo15q8.js";import"./chevron-right-DuWMSwET.js";function J(){const[c,x]=t.useState([]),[f,m]=t.useState(!0),[o,N]=t.useState(""),[r,h]=t.useState({current_page:1,per_page:10,total:0,last_page:1}),[d,b]=t.useState("name"),[p,u]=t.useState("asc"),v=async()=>{try{m(!0);const a=await M.get("/api/v1/materials",{params:{search:o,page:r.current_page,per_page:r.per_page,sort_field:d,sort_direction:p}});a.data&&(x(a.data.data),h({current_page:a.data.current_page,per_page:a.data.per_page,total:a.data.total,last_page:a.data.last_page}))}catch(a){console.error("Error fetching materials:",a),x([])}finally{m(!1)}};t.useEffect(()=>{const a=setTimeout(()=>{v()},300);return()=>clearTimeout(a)},[o,r.current_page,d,p]);const _=a=>{d===a?u(p==="asc"?"desc":"asc"):(b(a),u("asc"))},w=()=>{const a=[];for(let s=1;s<=r.last_page;s++)a.push(e.jsx(n,{variant:r.current_page===s?"default":"outline",className:"w-10 h-10",onClick:()=>h(y=>({...y,current_page:s})),children:s},s));return a},j=({field:a,children:s})=>e.jsx(g,{className:"cursor-pointer",onClick:()=>_(a),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:s}),e.jsx(I,{className:"w-4 h-4"})]})});return e.jsxs(T,{children:[e.jsx(S,{title:"Materials Management"}),e.jsxs("div",{className:"container mx-auto py-6",children:[e.jsx(B,{items:[{label:"Materials",href:"/admin/materials"}]}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Materials"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(A,{type:"text",placeholder:"Search materials...",value:o,onChange:a=>N(a.target.value),className:"w-64"}),e.jsx(n,{children:"Add New Material"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs(D,{children:[e.jsx(E,{children:e.jsxs(l,{children:[e.jsx(j,{field:"name",children:"Name"}),e.jsx(j,{field:"description",children:"Description"}),e.jsx(g,{children:"Actions"})]})}),e.jsx(C,{children:f?e.jsx(l,{children:e.jsx(i,{colSpan:3,className:"text-center py-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"})})})}):c.length===0?e.jsx(l,{children:e.jsx(i,{colSpan:3,className:"text-center py-4 text-gray-500",children:"No materials found"})}):c.map(a=>e.jsxs(l,{children:[e.jsx(i,{children:a.name}),e.jsx(i,{children:a.description}),e.jsx(i,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"outline",children:"Edit"}),e.jsx(n,{variant:"destructive",children:"Delete"})]})})]},a.id))})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",c.length," of ",r.total," results"]}),e.jsx("div",{className:"flex gap-2",children:w()})]})]})]})]})}export{J as default};
